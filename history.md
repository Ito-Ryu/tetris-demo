# テトリスゲーム開発履歴

このファイルは、Geminiとの対話を通じてテトリスゲームを開発・修正した履歴を記録したものです。

## 1. 初期設定とデバッグ

- **問題**: JavaScriptでエラーが発生している。
- **原因特定**:
    1.  `index.html` にゲームを描画するための `<canvas>` 要素がありませんでした。
    2.  `style.css` が読み込まれていませんでした。
    3.  `script.js` ファイル内に、JavaScriptの構文ではない余分な文字（HTMLタグなど）が含まれていました。
- **修正**:
    - `index.html` を修正し、`<canvas>` 要素の追加と `style.css` の読み込みを行いました。
    - `style.css` を修正し、ゲームが画面中央に表示されるようにレイアウトを調整しました。
    - `script.js` から不要な文字を削除し、正しいJavaScriptコードのみに修正しました。

## 2. ポーズ機能の実装

- **リクエスト**: スペースキーでゲームを一時停止できるようにしたい。
- **実装**:
    - ゲームの状態を管理する `isPaused` 変数を追加しました。
    - スペースキーが押されると `isPaused` の状態が切り替わるように、キーイベントリスナーを更新しました。
    - ゲームループ (`gameLoop`) を変更し、ポーズ中はテトリミノの落下を停止させました。
    - 描画関数 (`draw`) を変更し、ポーズ中に「PAUSED」という文字が画面に表示されるようにしました。

## 3. スコアと制限時間機能の実装

- **リクエスト**:
    - 1分間の制限時間を設けたい。
    - 1ライン消すと1000点が入るスコア機能を追加したい。
- **実装**:
    - `score`（スコア）と `elapsedTime`（経過時間）を管理する変数を追加しました。
    - ラインが消えるたびに `score` が1000点加算されるように `clearLines` 関数を更新しました。
    - ゲームループ内で経過時間を計測し、60秒が経過したらゲームが終了するようにしました。
    - ゲームオーバー時と時間切れ時に最終スコアをアラートで表示する機能を追加しました。
    - 現在のスコアと残り時間をゲーム画面の上部に描画するように `draw` 関数を更新しました。

## 4. 制限時間延長機能の実装

- **リクエスト**: 1行消すと制限時間が15秒伸びるようにしたい。
- **実装**:
    - `clearLines` 関数を再度更新しました。
    - ラインが消えるたびに、経過時間 `elapsedTime` から15秒（15000ミリ秒）を減算することで、実質的に残り時間が15秒増えるようにしました。

## 5. 新規ミノ（U）の色の設定

- **リクエスト**: ユーザーが追加した「U」のミノを白色にしたい。
- **実装**:
    - ユーザーが `SHAPES` 配列にUのミノを追加したことを確認しました。
    - `COLORS` 配列に、Uのミノに対応する色が定義されていないことを発見しました。
    - `COLORS` 配列に新しい色のエントリとして白 (`'#FFFFFF'`) を追加し、Uのミノが正しく白色で表示されるように修正しました。
